{% from "govuk-frontend/components/summary-list/macro.njk" import govukSummaryList %}

{% if brief.status == 'live' and not brief.clarificationQuestionsAreClosed and brief.questionAndAnswerSessionDetails %}
  <h2 id="question-and-answer-session" class="govuk-heading-m">Question and answer session</h2>
  <a class="govuk-link" href="/suppliers/opportunities/{{ brief.id }}/question-and-answer-session">
    {% if current_user.is_authenticated and current_user.role == 'supplier' %}
      View question and answer session details
    {% else %}
      Log in to view question and answer session details
    {% endif %}
  </a>
{% endif %}

<h2 id="clarification-questions" class="govuk-heading-m">Questions asked by suppliers</h2>
{% if brief.clarificationQuestions is undefined or brief.clarificationQuestions|length == 0 %} 
<p class="summary-item-no-content">No questions have been answered yet</p>
{% else %}
{{ govukSummaryList({
    "rows": brief.clarificationQuestions, 
    "classes": 'app-govuk-summary-list app-govuk-summary-list--top-border govuk-!-margin-bottom-8'
  }) 
}}
{% endif %}

{% if brief.status == 'live' and not brief.clarificationQuestionsAreClosed %}
  <a class="govuk-link" href="/suppliers/opportunities/{{ brief.id }}/ask-a-question">
    {% if current_user.is_authenticated and current_user.role == 'supplier' %}
      Ask a question
    {% else %}
      Log in to ask a question
    {% endif %}
  </a>
{% elif brief.status == 'live' %}
  The deadline for asking questions about this opportunity was {{ brief.clarificationQuestionsClosedAt|dateformat }}.
{% endif %}
