{% extends "_base_page.html" %}

{% block page_title %}Clarification questions â€“ Digital Marketplace{% endblock %}

{% block breadcrumb %}
  {# TODO: this is the wrong label, probably #}
  {%
    with items = [
      {
        "link": "/",
        "label": "Digital Marketplace"
      },
      {
        "link": url_for(".buyer_dashboard"),
        "label": "Your account"
      }
    ]
  %}
    {% include "toolkit/breadcrumb.html" %}
  {% endwith %}
{% endblock %}

{% block main_content %}
  <div class="grid-row">

    {% block before_heading %}{% endblock %}
    <div class="column-two-thirds">
      {% with
        heading = "Clarification questions",
        smaller = true,
        context = brief.get('title', brief['lotName'])
      %}
        {% include "toolkit/page-heading.html" %}
      {% endwith %}

    </div>

    <div class="column-one-whole">
      {% import "toolkit/summary-table.html" as summary %}

      {{ summary.heading("Clarification questions", id="clarification-questions") }}
      {% call(question) summary.list_table(
        brief.clarificationQuestions,
        field_headings=[
          "Question",
          "Answer"
        ],
        field_headings_visible=False,
        empty_message="No clarification questions have been answered yet"
      ) %}

        {% call summary.row() %}
          {% call summary.field(first=True, wide=False) -%}
            <span aria-label="question">{{ question.number }}.</span>
            {{ question.question }}
          {%- endcall %}
          {{ summary.text(question.answer) }}
        {% endcall %}
      {% endcall %}

    </div>
  </div>

  <a href="{{ url_for('.add_clarification_question', framework_slug=brief.frameworkSlug, lot_slug=brief.lotSlug, brief_id=brief.id) }}">Answer a clarification question</a>

  {%
    with
    url = url_for(".view_brief_overview", framework_slug=brief.frameworkSlug, lot_slug=brief.lotSlug, brief_id=brief.id),
    text = "Return to overview"
  %}
    {% include "toolkit/secondary-action-link.html" %}
  {% endwith %}

{% endblock %}
